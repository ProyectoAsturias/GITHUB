<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Prueba1" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a9c6277c-d110-4f9c-92ea-9bcc8de2a392">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="64"/>
	<parameter name="title" class="java.lang.String" isForPrompting="false"/>
	<parameter name="mapImage" class="java.lang.String"/>
	<parameter name="description" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["./subreports/"]]></defaultValueExpression>
	</parameter>
	<parameter name="dataTables" class="java.util.ArrayList"/>
	<parameter name="legendData" class="java.util.ArrayList"/>
	<parameter name="IMAGES_DIR" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="124" splitType="Stretch">
			<image>
				<reportElement x="122" y="0" width="315" height="73" uuid="a7a723ee-8c39-4073-8070-8fc76be75b44"/>
				<imageExpression><![CDATA[$P{IMAGES_DIR}+"portada.jpg"]]></imageExpression>
			</image>
			<textField isStretchWithOverflow="true">
				<reportElement x="0" y="73" width="555" height="40" isRemoveLineWhenBlank="true" uuid="427ffb71-fa79-4087-8e36-6968a0fecf2c"/>
				<textElement textAlignment="Center">
					<font size="24" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{title}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="35" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="555" height="25" isRemoveLineWhenBlank="true" uuid="747c7121-1732-4076-a8a7-c3f8e0d5c12f"/>
				<textFieldExpression><![CDATA[$P{description}]]></textFieldExpression>
			</textField>
		</band>
		<band height="181">
			<image scaleImage="RealHeight" hAlign="Center">
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="555" height="172" uuid="63b9ae9c-6881-4e3a-8c2c-38884eaf8ab3"/>
				<imageExpression><![CDATA[new java.io.StringBufferInputStream( new org.w3c.tools.codec.Base64Decoder($P{mapImage}).processString() )]]></imageExpression>
			</image>
		</band>
		<band height="116">
			<printWhenExpression><![CDATA[$P{legendData}.size() != 0]]></printWhenExpression>
			<rectangle>
				<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="555" height="101" isPrintWhenDetailOverflows="true" uuid="04b3a2ac-d61d-40a2-886e-39d3982a122c"/>
			</rectangle>
			<staticText>
				<reportElement x="235" y="0" width="100" height="20" uuid="136d9344-6a13-4f2d-9a41-d9f5e9f25b0b"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Leyenda]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="20" width="555" height="1" uuid="98099b58-7b0e-46d7-b5e1-90a447e57603"/>
			</line>
			<subreport isUsingCache="true">
				<reportElement stretchType="RelativeToTallestObject" x="15" y="30" width="525" height="61" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="1afcc82c-bb3b-429b-b436-4a0fe9a6beac"/>
				<subreportParameter name="legendTitles">
					<subreportParameterExpression><![CDATA[$P{legendData}.get(1)]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="legendImages">
					<subreportParameterExpression><![CDATA[$P{legendData}.get(0)]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource((List)$P{legendData}.get(1))]]></dataSourceExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "/Vertical - legend_subreport.jasper"]]></subreportExpression>
			</subreport>
		</band>
		<band height="156">
			<subreport>
				<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="555" height="155" isRemoveLineWhenBlank="true" uuid="64bde9c7-16a7-48bf-8be9-5ab696be202a"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="dataTables">
					<subreportParameterExpression><![CDATA[$P{dataTables}]]></subreportParameterExpression>
				</subreportParameter>
				<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{dataTables})]]></dataSourceExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "/Vertical - dataTables_subreport.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</detail>
</jasperReport>
