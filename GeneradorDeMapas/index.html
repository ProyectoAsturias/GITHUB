<!DOCTYPE html>
<html lang="es">
	<head>
		<title>Generador de Mapas</title>
		<link rel="favicon/favicon-96x96" sizes="96x96" href="../Common/images/favicon-96x96.png">
		<link href="../Common/bootstrap-3.3.4/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="css/creadorMapas.css" rel="stylesheet" media="screen">
		<link rel='stylesheet' href='../Common/css/ol.css'>
		<link rel='stylesheet' href='../Common/css/chosen.css'>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.6.0/ol.js"></script>
		<!--<script src="../Common/js/ol.js"></script>-->
		<script src='../Common/js/jquery.min.js'></script>
		<script src='../Common/js/bootstrap-treeview.js'></script>
		<script src="../Common/js/chosen.jquery.js"></script>
		<script src='../Common/js/attachMap.js'></script>
		<script src='../Common/js/createMap.js'></script>
		<script src="../Common/bootstrap-3.3.4/js/bootstrap.min.js"></script>

		<script src='./js/configuration.js'></script>
		<script src='./js/createTreeMap.js'></script>
		<script src='./js/createLayerTreeMap.js'></script>
		<script src='./js/createLegend.js'></script>
		<script src='./js/login.js'></script>
		<script src='./js/maps.js'></script>
		<script src='./js/mapEditor.js'></script>
		<script src='./js/localgis.js'></script>
		<script src='./js/wms.js'></script>
		<script src='./js/menuFuentesDatos.js'></script>

	
	</head>
	<body>
		<div>
			<div id="menucapas" class="col-xs-2">
				<div>
					<div>
						<div id="logo" class="">
							<img src="/GITHUB-Alikornio/Common/images/cabeceraLogoAsturias.gif">
						</div>
						<div id="leftBar">
							<div id="layersTree"></div>
							<div class="btn-group btn-group-justified" role="group">
								<a href="#" id="saveMapButton" class="btn btn-lg btn-success"><span class="glyphicon glyphicon-floppy-disk"></span> Guardar Mapa</a>
								<a href="#" id="cancelMapButton" class="btn btn-lg btn-danger"><span class="glyphicon glyphicon-remove"></span>  </a>
							</div>
							<div class="separator"></div>
							<div id="logout">
								<p>Conectado como: <span class="glyphicon glyphicon-user"></span><strong> USUARIO</strong></p>
								<a href="#" class="btn btn-lg btn-warning"><span class="glyphicon glyphicon-log-out"></span> Logout</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="contenido" class="col-xs-10">
				<div class="row clearfix">
					<div id="allTools" class="col-xs-12 column">
						<div class="col-xs-2" id="fuentesDatos">
							
						</div>

						<div class="col-xs-10" id="selector">
						</div>
					</div>
					<div id="mapContainer">
						<div id="progress"></div>
						<div id="map" class="map"></div>
					</div>
				</div>  
			</div>
		</div>

<script>
/**
 * Renders a progress bar.
 * @param {Element} el The target element.
 * @constructor
 */
function Progress(el) {
  this.el = el;
  this.loading = 0;
  this.loaded = 0;
}


/**
 * Increment the count of loading tiles.
 */
Progress.prototype.addLoading = function() {
  if (this.loading === 0) {
    this.show();
  }
  ++this.loading;
  this.update();
};


/**
 * Increment the count of loaded tiles.
 */
Progress.prototype.addLoaded = function() {
  setTimeout(function() {
    ++this.loaded;
    this.update();
  }.bind(this), 100);
};


/**
 * Update the progress bar.
 */
Progress.prototype.update = function() {
  var width = (this.loaded / this.loading * 100).toFixed(1) + '%';
  this.el.style.width = width;
  if (this.loading === this.loaded) {
    this.loading = 0;
    this.loaded = 0;
    setTimeout(this.hide.bind(this), 500);
  }
};


/**
 * Show the progress bar.
 */
Progress.prototype.show = function() {
  this.el.style.visibility = 'visible';
};


/**
 * Hide the progress bar.
 */
Progress.prototype.hide = function() {
  if (this.loading === this.loaded) {
    this.el.style.visibility = 'hidden';
    this.el.style.width = 0;
  }
};

var progress = new Progress(document.getElementById('progress'));


initMenu();
initMap();
</script>
</body>
</html>